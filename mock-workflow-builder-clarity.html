<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Clarity-Maximal Canvas</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        :root {
            --bg: #f8fafc;
            --spine: #e2e8f0;
            --node-bg: #ffffff;
            --accent: #6366f1;
            --text: #1e293b;
        }

        body {
            background-color: var(--bg);
            color: var(--text);
            font-family: 'Segoe UI', system-ui, sans-serif;
            overflow: hidden;
        }

        .spine-line {
            position: absolute;
            background: var(--spine);
            z-index: 0;
        }

        .node-bubble {
            background: var(--node-bg);
            border: 2px solid var(--spine);
            border-radius: 9999px;
            box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 10;
        }

        .node-bubble:hover {
            transform: scale(1.05);
            border-color: var(--accent);
            box-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.1);
        }

        .node-bubble.active {
            border-color: var(--accent);
            background: #eef2ff;
            box-shadow: 0 0 0 4px rgba(99, 102, 241, 0.1);
        }

        .path-label {
            font-size: 12px;
            font-weight: 600;
            color: #64748b;
            background: var(--bg);
            padding: 2px 8px;
            border-radius: 4px;
        }

        .svg-layer {
            position: absolute;
            inset: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
        }

        .connection-curve {
            fill: none;
            stroke: #cbd5e1;
            stroke-width: 3;
            stroke-linecap: round;
        }

        .connection-curve.active-path {
            stroke: var(--accent);
            stroke-width: 4;
        }

        .loop-curve {
            stroke: #94a3b8;
            stroke-dasharray: 8 4;
            opacity: 0.5;
        }

        .inspector-slide {
            position: absolute;
            right: 0;
            top: 20px;
            bottom: 20px;
            width: 350px;
            background: white;
            border-radius: 24px 0 0 24px;
            box-shadow: -20px 0 50px -10px rgba(0,0,0,0.1);
            transform: translateX(100%);
            transition: transform 0.4s cubic-bezier(0.16, 1, 0.3, 1);
            z-index: 50;
        }

        .inspector-slide.open {
            transform: translateX(0);
        }

        .arrow-head {
            fill: #cbd5e1;
        }
    </style>
</head>
<body class="flex h-screen w-screen overflow-hidden">

    <div class="flex-1 relative flex items-center justify-center">
        <!-- Background Title -->
        <div class="absolute top-12 left-12">
            <h1 class="text-3xl font-bold tracking-tight text-slate-300">SimpleFlow</h1>
            <p class="text-slate-400">Solar Project Template</p>
        </div>

        <!-- SVG Layer for Curves -->
        <svg class="svg-layer">
            <defs>
                <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
                    <polygon points="0 0, 10 3.5, 0 7" fill="#cbd5e1" />
                </marker>
                <marker id="arrowhead-accent" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
                    <polygon points="0 0, 10 3.5, 0 7" fill="#6366f1" />
                </marker>
            </defs>

            <!-- Main Spine -->
            <line x1="150" y1="400" x2="350" y2="400" class="connection-curve active-path" marker-end="url(#arrowhead-accent)" />
            <line x1="450" y1="400" x2="650" y2="400" class="connection-curve active-path" marker-end="url(#arrowhead-accent)" />
            <line x1="750" y1="400" x2="950" y2="400" class="connection-curve active-path" marker-end="url(#arrowhead-accent)" />

            <!-- Loopback 1: Revision (Node 3 -> Node 1) -->
            <path d="M 700,450 C 700,600 200,600 200,450" class="connection-curve loop-curve" marker-end="url(#arrowhead)" />
            
            <!-- Loopback 2: Clarification (Node 4 -> Node 2) -->
            <path d="M 1000,450 C 1000,750 400,750 400,450" class="connection-curve loop-curve" marker-end="url(#arrowhead)" />

            <!-- Self Loop (Node 2) -->
            <path d="M 420,350 C 450,250 350,250 380,350" class="connection-curve loop-curve" marker-end="url(#arrowhead)" />
        </svg>

        <!-- Node Labels / Path Labels -->
        <div class="absolute" style="left: 210px; top: 370px;"><span class="path-label">START HERE</span></div>
        <div class="absolute" style="left: 500px; top: 370px;"><span class="path-label">NEXT STEP</span></div>
        <div class="absolute" style="left: 800px; top: 370px;"><span class="path-label">FINALIZE</span></div>
        <div class="absolute" style="left: 450px; top: 580px;"><span class="path-label text-slate-400">SEND BACK FOR REVISION</span></div>

        <!-- Nodes (Bubbles) -->
        <div id="n1" class="node-bubble absolute w-24 h-24" style="left: 50px; top: 350px;" onclick="showDetail('Intake', 'Where documents enter the system. We accept PDFs, JPGs, and handwritten scans.', 'Step 1')">
            <span class="text-3xl">üì•</span>
        </div>

        <div id="n2" class="node-bubble absolute w-24 h-24" style="left: 350px; top: 350px;" onclick="showDetail('Analyze', 'AI scans for 14 critical data points. If anything is blurry, it tries again (self-loop).', 'Step 2')">
            <span class="text-3xl">üß†</span>
        </div>

        <div id="n3" class="node-bubble absolute w-24 h-24" style="left: 650px; top: 350px;" onclick="showDetail('Verify', 'A human reviewer checks the AI\'s work against the original source.', 'Step 3')">
            <span class="text-3xl">‚úÖ</span>
        </div>

        <div id="n4" class="node-bubble absolute w-24 h-24 border-dashed border-slate-300" style="left: 950px; top: 350px;" onclick="showDetail('Finish', 'The project is marked as compliant and data is exported.', 'Goal')">
            <span class="text-3xl">üèÅ</span>
        </div>

        <!-- Legend -->
        <div class="absolute bottom-12 right-12 flex flex-col gap-4">
            <div class="flex items-center gap-3">
                <div class="w-8 h-1 bg-indigo-500 rounded"></div>
                <span class="text-sm font-bold text-slate-600">MAIN PATH</span>
            </div>
            <div class="flex items-center gap-3">
                <div class="w-8 h-1 bg-slate-300 border-dashed border-b-2 rounded"></div>
                <span class="text-sm font-medium text-slate-400 italic">CORRECTION LOOPS</span>
            </div>
        </div>
    </div>

    <!-- Minimal Slide-out Inspector -->
    <div id="inspector" class="inspector-slide p-10 flex flex-col">
        <button onclick="closeInspector()" class="absolute top-6 right-6 text-slate-400 hover:text-slate-600">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 6 6 18"/><path d="m6 6 12 12"/></svg>
        </button>

        <div class="mb-10">
            <span id="insp-step" class="text-indigo-600 font-bold tracking-widest text-xs uppercase">Step X</span>
            <h2 id="insp-title" class="text-4xl font-extrabold text-slate-900 mt-2">Node Name</h2>
        </div>

        <div class="space-y-8 flex-1">
            <div>
                <h3 class="text-xs font-bold text-slate-400 uppercase tracking-wider mb-3">What happens here?</h3>
                <p id="insp-desc" class="text-slate-600 text-lg leading-relaxed">
                    Description of the process.
                </p>
            </div>

            <div class="p-6 bg-slate-50 rounded-3xl border border-slate-100">
                <h3 class="text-xs font-bold text-indigo-400 uppercase tracking-wider mb-4">Possible Outcomes</h3>
                <div class="flex flex-col gap-3">
                    <div class="flex items-center justify-between">
                        <span class="font-bold text-slate-700">Success</span>
                        <span class="text-slate-400 text-sm">‚Üí Next Step</span>
                    </div>
                    <div class="flex items-center justify-between">
                        <span class="font-bold text-slate-700">Failure</span>
                        <span class="text-slate-400 text-sm">‚Ü∫ Restart</span>
                    </div>
                </div>
            </div>
        </div>

        <div class="mt-auto">
            <button class="w-full py-4 bg-slate-900 text-white rounded-2xl font-bold hover:bg-slate-800 transition-all">
                Edit Configuration
            </button>
        </div>
    </div>

    <script>
        function showDetail(title, desc, step) {
            document.querySelectorAll('.node-bubble').forEach(n => n.classList.remove('active'));
            event.currentTarget.classList.add('active');

            document.getElementById('insp-title').innerText = title;
            document.getElementById('insp-desc').innerText = desc;
            document.getElementById('insp-step').innerText = step;
            document.getElementById('inspector').classList.add('open');
        }

        function closeInspector() {
            document.getElementById('inspector').classList.remove('open');
            document.querySelectorAll('.node-bubble').forEach(n => n.classList.remove('active'));
        }
    </script>
</body>
</html>
